{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":15,"numPassedTests":119,"numPendingTestSuites":0,"numPendingTests":1,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":16,"numTotalTests":121,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1770110922725,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Vehicle Admin Routes Unit Tests","POST /api/admin/vehicle-requests/:id/approve"],"duration":195,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests POST /api/admin/vehicle-requests/:id/approve Should approve REGISTER request successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110925027,"status":"passed","title":"Should approve REGISTER request successfully"},{"ancestorTitles":["Vehicle Admin Routes Unit Tests","POST /api/admin/vehicle-requests/:id/approve"],"duration":107,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests POST /api/admin/vehicle-requests/:id/approve Should fail (400) if QUOTA EXCEEDED","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110925223,"status":"passed","title":"Should fail (400) if QUOTA EXCEEDED"},{"ancestorTitles":["Vehicle Admin Routes Unit Tests","POST /api/admin/vehicle-requests/:id/reject"],"duration":164,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests POST /api/admin/vehicle-requests/:id/reject Should reject request successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925330,"status":"passed","title":"Should reject request successfully"},{"ancestorTitles":["Vehicle Admin Routes Unit Tests","POST /api/admin/vehicle-requests/:id/reject"],"duration":184,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests POST /api/admin/vehicle-requests/:id/reject Should fail if missing reason","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925494,"status":"passed","title":"Should fail if missing reason"},{"ancestorTitles":["Vehicle Admin Routes Unit Tests","PATCH /api/admin/vehicle-cards/:id/status"],"duration":106,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests PATCH /api/admin/vehicle-cards/:id/status Should activate card successfully if quota valid","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925678,"status":"passed","title":"Should activate card successfully if quota valid"},{"ancestorTitles":["Vehicle Admin Routes Unit Tests","PATCH /api/admin/vehicle-cards/:id/status"],"duration":107,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests PATCH /api/admin/vehicle-cards/:id/status Should fail to activate if quota exceeded","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925784,"status":"passed","title":"Should fail to activate if quota exceeded"}],"endTime":1770110925894,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\vehicleAdmin.test.js","startTime":1770110923630,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Vehicle Services Unit Tests","GET /api/services/fees-table"],"duration":180,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests GET /api/services/fees-table Should return fees object","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925004,"status":"passed","title":"Should return fees object"},{"ancestorTitles":["Vehicle Services Unit Tests","GET /api/services/my-policy"],"duration":127,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests GET /api/services/my-policy Should return room policy","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110925185,"status":"passed","title":"Should return room policy"},{"ancestorTitles":["Vehicle Services Unit Tests","POST /api/services/register-card"],"duration":153,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests POST /api/services/register-card Should register successfully if quota available","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925312,"status":"passed","title":"Should register successfully if quota available"},{"ancestorTitles":["Vehicle Services Unit Tests","POST /api/services/register-card"],"duration":213,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests POST /api/services/register-card Should fail (403) if limit reached","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110925465,"status":"passed","title":"Should fail (403) if limit reached"},{"ancestorTitles":["Vehicle Services Unit Tests","POST /api/services/cancel-card"],"duration":116,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests POST /api/services/cancel-card Should submit cancellation request","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925679,"status":"passed","title":"Should submit cancellation request"},{"ancestorTitles":["Vehicle Services Unit Tests","POST /api/services/cancel-card"],"duration":154,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests POST /api/services/cancel-card Should fail (400) if request already pending","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110925795,"status":"passed","title":"Should fail (400) if request already pending"},{"ancestorTitles":["Vehicle Services Unit Tests","POST /api/services/cancel-pending-request"],"duration":290,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests POST /api/services/cancel-pending-request Should cancel pending request and delete file","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925949,"status":"passed","title":"Should cancel pending request and delete file"}],"endTime":1770110926246,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\vehicle.test.js","startTime":1770110923650,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Amenity Admin Routes Unit Tests","GET /api/admin/amenities/rooms"],"duration":194,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests GET /api/admin/amenities/rooms Should return all rooms","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110924986,"status":"passed","title":"Should return all rooms"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","GET /api/admin/amenities/rooms"],"duration":142,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests GET /api/admin/amenities/rooms Should handle error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110925181,"status":"passed","title":"Should handle error"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","PUT /api/admin/amenities/rooms/:id"],"duration":171,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests PUT /api/admin/amenities/rooms/:id Should update room successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110925324,"status":"passed","title":"Should update room successfully"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","GET /api/admin/amenities/bookings"],"duration":122,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests GET /api/admin/amenities/bookings Should return all bookings","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925495,"status":"passed","title":"Should return all bookings"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","POST /api/admin/amenities/bookings/:id/cancel"],"duration":186,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests POST /api/admin/amenities/bookings/:id/cancel Should cancel booking and notify user","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110925618,"status":"passed","title":"Should cancel booking and notify user"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","POST /api/admin/amenities/bookings/:id/cancel"],"duration":192,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests POST /api/admin/amenities/bookings/:id/cancel Should fail (400) if reason is missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925804,"status":"passed","title":"Should fail (400) if reason is missing"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","POST /api/admin/amenities/bookings/:id/cancel"],"duration":444,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests POST /api/admin/amenities/bookings/:id/cancel Should fail (404) if booking not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110926000,"status":"passed","title":"Should fail (404) if booking not found"}],"endTime":1770110926449,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\amenityAdmin.test.js","startTime":1770110923652,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Profile Routes Unit Tests","GET /api/profile/me"],"duration":149,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests GET /api/profile/me Should return user profile with room details","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110924943,"status":"passed","title":"Should return user profile with room details"},{"ancestorTitles":["Profile Routes Unit Tests","GET /api/profile/me"],"duration":114,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests GET /api/profile/me Should return 404 if user not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110925093,"status":"passed","title":"Should return 404 if user not found"},{"ancestorTitles":["Profile Routes Unit Tests","GET /api/profile/status"],"duration":100,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests GET /api/profile/status Should return status info","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925208,"status":"passed","title":"Should return status info"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/update-details"],"duration":188,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/update-details Should update phone successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925308,"status":"passed","title":"Should update phone successfully"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/update-details"],"duration":191,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/update-details Should fail (400) if phone is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110925496,"status":"passed","title":"Should fail (400) if phone is missing"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/change-password"],"duration":118,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/change-password Should change password successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110925688,"status":"passed","title":"Should change password successfully"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/change-password"],"duration":160,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/change-password Should fail (400) if current password incorrect","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110925807,"status":"passed","title":"Should fail (400) if current password incorrect"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/change-password"],"duration":575,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/change-password Should fail (400) if new passwords do not match","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925968,"status":"passed","title":"Should fail (400) if new passwords do not match"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/change-password"],"duration":296,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/change-password Should fail (400) if new password too short","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110926543,"status":"passed","title":"Should fail (400) if new password too short"}],"endTime":1770110926844,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\profile.test.js","startTime":1770110923627,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should return 401 if no token provided","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927034,"status":"passed","title":"Should return 401 if no token provided"},{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should return 401 if token is invalid (jwt verify fails)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927039,"status":"passed","title":"Should return 401 if token is invalid (jwt verify fails)"},{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should return 401 if user not found in DB","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927045,"status":"passed","title":"Should return 401 if user not found in DB"},{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should return 403 if user account is disabled (is_active = false)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927048,"status":"passed","title":"Should return 403 if user account is disabled (is_active = false)"},{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should return 401 if role has changed (Token role !== DB role)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927051,"status":"passed","title":"Should return 401 if role has changed (Token role !== DB role)"},{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should call next() and set req.user if everything is valid","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927053,"status":"passed","title":"Should call next() and set req.user if everything is valid"},{"ancestorTitles":["Auth Middleware Unit Tests","isAdmin"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests isAdmin Should call next() if user is admin","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927055,"status":"passed","title":"Should call next() if user is admin"},{"ancestorTitles":["Auth Middleware Unit Tests","isAdmin"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests isAdmin Should return 403 if user is NOT admin","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927057,"status":"passed","title":"Should return 403 if user is NOT admin"},{"ancestorTitles":["Auth Middleware Unit Tests","isAdmin"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests isAdmin Should return 403 if req.user is missing (Not logged in logic leak check)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927058,"status":"passed","title":"Should return 403 if req.user is missing (Not logged in logic leak check)"}],"endTime":1770110927065,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\authMiddleware.test.js","startTime":1770110925992,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Amenity User Routes Unit Tests","GET /api/amenities/rooms"],"duration":198,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests GET /api/amenities/rooms Should return active rooms","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110925418,"status":"passed","title":"Should return active rooms"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/book"],"duration":195,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/book Should book successfully if all checks pass","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925618,"status":"passed","title":"Should book successfully if all checks pass"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/book"],"duration":154,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/book Should fail (403) if user has no apartment","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925814,"status":"passed","title":"Should fail (403) if user has no apartment"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/book"],"duration":244,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/book Should fail (400) if booking date is in past","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925969,"status":"passed","title":"Should fail (400) if booking date is in past"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/book"],"duration":466,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/book Should fail (400) if time slot occupied (Overlap)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110926213,"status":"passed","title":"Should fail (400) if time slot occupied (Overlap)"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/cancel/:id"],"duration":null,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/cancel/:id Should cancel successfully if booking is in future","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1770110926680,"status":"pending","title":"Should cancel successfully if booking is in future"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/cancel/:id"],"duration":150,"failing":false,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected substring: \u001b[32m\"Cannot cancel past\"\u001b[39m\nReceived string:    \u001b[31m\"Late Cancellation Prohibited. You must cancel at least 2 hours before the start time.\"\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected substring: \u001b[32m\"Cannot cancel past\"\u001b[39m\nReceived string:    \u001b[31m\"Late Cancellation Prohibited. You must cancel at least 2 hours before the start time.\"\u001b[39m\n    at Object.toContain (G:\\quanlychungcu\\backend\\tests\\amenityUser.test.js:217:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/cancel/:id Should fail (400) if cancelling past booking","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110926680,"status":"failed","title":"Should fail (400) if cancelling past booking"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/cancel/:id"],"duration":203,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/cancel/:id Should fail (404) if booking not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110926862,"status":"passed","title":"Should fail (404) if booking not found"}],"endTime":1770110927108,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAmenity User Routes Unit Tests › POST /api/amenities/cancel/:id › Should fail (400) if cancelling past booking\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n    Expected substring: \u001b[32m\"Cannot cancel past\"\u001b[39m\n    Received string:    \u001b[31m\"Late Cancellation Prohibited. You must cancel at least 2 hours before the start time.\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 215 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 216 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 217 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Cannot cancel past'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 218 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 219 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 220 |\u001b[39m         test(\u001b[32m'Should fail (404) if booking not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toContain (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/amenityUser.test.js\u001b[39m\u001b[0m\u001b[2m:217:38)\u001b[22m\u001b[2m\u001b[22m\n","name":"G:\\quanlychungcu\\backend\\tests\\amenityUser.test.js","startTime":1770110923564,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Penalty Service Unit Tests","calculateLateFee"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests calculateLateFee Should return 0 fee if daysLate <= 3 (Grace period)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927276,"status":"passed","title":"Should return 0 fee if daysLate <= 3 (Grace period)"},{"ancestorTitles":["Penalty Service Unit Tests","calculateLateFee"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests calculateLateFee Should return 5% fee if daysLate is between 4 and 30","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927278,"status":"passed","title":"Should return 5% fee if daysLate is between 4 and 30"},{"ancestorTitles":["Penalty Service Unit Tests","calculateLateFee"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests calculateLateFee Should return 10% fee if daysLate > 30","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927279,"status":"passed","title":"Should return 10% fee if daysLate > 30"},{"ancestorTitles":["Penalty Service Unit Tests","calculateLateFee"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests calculateLateFee Should handle negative inputs (Sanitization)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927280,"status":"passed","title":"Should handle negative inputs (Sanitization)"},{"ancestorTitles":["Penalty Service Unit Tests","applyLateFees"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests applyLateFees STAGE 1: Should apply penalty fee and update status to overdue","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927281,"status":"passed","title":"STAGE 1: Should apply penalty fee and update status to overdue"},{"ancestorTitles":["Penalty Service Unit Tests","applyLateFees"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests applyLateFees STAGE 2: Should apply second penalty fee","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927294,"status":"passed","title":"STAGE 2: Should apply second penalty fee"},{"ancestorTitles":["Penalty Service Unit Tests","applyLateFees"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests applyLateFees STAGE 3: Should LOCK USER ACCOUNT and notify Admin","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1770110927298,"status":"passed","title":"STAGE 3: Should LOCK USER ACCOUNT and notify Admin"},{"ancestorTitles":["Penalty Service Unit Tests","applyLateFees"],"duration":25,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests applyLateFees Should ROLLBACK transaction if an error occurs","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927305,"status":"passed","title":"Should ROLLBACK transaction if an error occurs"},{"ancestorTitles":["Penalty Service Unit Tests","notifyAdminOverdueBills"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests notifyAdminOverdueBills Should run without error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927331,"status":"passed","title":"Should run without error"}],"endTime":1770110927334,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\penaltyService.test.js","startTime":1770110927101,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["News Routes Unit Tests","GET /api/news"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests GET /api/news Should return list of active news","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927235,"status":"passed","title":"Should return list of active news"},{"ancestorTitles":["News Routes Unit Tests","GET /api/news"],"duration":55,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests GET /api/news Should handle server error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927250,"status":"passed","title":"Should handle server error"},{"ancestorTitles":["News Routes Unit Tests","GET /api/news/:id"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests GET /api/news/:id Should return news details if found","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927305,"status":"passed","title":"Should return news details if found"},{"ancestorTitles":["News Routes Unit Tests","GET /api/news/:id"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests GET /api/news/:id Should return 404 if not found","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927317,"status":"passed","title":"Should return 404 if not found"},{"ancestorTitles":["News Routes Unit Tests","POST /api/news/upload-image"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests POST /api/news/upload-image Should upload image successfully (Mocked)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927328,"status":"passed","title":"Should upload image successfully (Mocked)"},{"ancestorTitles":["News Routes Unit Tests","POST /api/news/upload-image"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests POST /api/news/upload-image Should return 400 if no file uploaded","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927339,"status":"passed","title":"Should return 400 if no file uploaded"}],"endTime":1770110927352,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\news.test.js","startTime":1770110926920,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/register"],"duration":37,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/register Should register successfully with valid data","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927235,"status":"passed","title":"Should register successfully with valid data"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/register"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/register Should fail if email already exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927272,"status":"passed","title":"Should fail if email already exists"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/register"],"duration":16,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/register Should fail if password is weak","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927283,"status":"passed","title":"Should fail if password is weak"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/register"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/register Should fail if missing fields","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927299,"status":"passed","title":"Should fail if missing fields"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/login"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/login Should login successfully with correct credentials","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927312,"status":"passed","title":"Should login successfully with correct credentials"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/login"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/login Should fail if account is disabled","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927325,"status":"passed","title":"Should fail if account is disabled"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/login"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/login Should fail if password is incorrect","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927335,"status":"passed","title":"Should fail if password is incorrect"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/admin/login"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/admin/login Should login successfully if role is admin","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927346,"status":"passed","title":"Should login successfully if role is admin"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/admin/login"],"duration":23,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/admin/login Should deny access if role is NOT admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927360,"status":"passed","title":"Should deny access if role is NOT admin"},{"ancestorTitles":["Auth Routes Unit Tests","GET /api/auth/verify-email/:token"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests GET /api/auth/verify-email/:token Should verify successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927383,"status":"passed","title":"Should verify successfully"}],"endTime":1770110927395,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\auth.test.js","startTime":1770110926909,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Dashboard Routes Unit Tests","GET /api/dashboard/stats"],"duration":23,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Dashboard Routes Unit Tests GET /api/dashboard/stats Should return all statistics correctly","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1770110927466,"status":"passed","title":"Should return all statistics correctly"},{"ancestorTitles":["Dashboard Routes Unit Tests","GET /api/dashboard/stats"],"duration":37,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Dashboard Routes Unit Tests GET /api/dashboard/stats Should handle database errors gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927490,"status":"passed","title":"Should handle database errors gracefully"}],"endTime":1770110927529,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\dashboard.test.js","startTime":1770110927127,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Bill Service Unit Tests","calculateMonthlyBill"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests calculateMonthlyBill Should calculate total correctly with all fees provided","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1770110927455,"status":"passed","title":"Should calculate total correctly with all fees provided"},{"ancestorTitles":["Bill Service Unit Tests","calculateMonthlyBill"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests calculateMonthlyBill Should handle null/undefined inputs gracefully (robustness)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1770110927458,"status":"passed","title":"Should handle null/undefined inputs gracefully (robustness)"},{"ancestorTitles":["Bill Service Unit Tests","calculateMonthlyBill"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests calculateMonthlyBill Should handle negative numbers by treating them as 0 (sanitization)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927460,"status":"passed","title":"Should handle negative numbers by treating them as 0 (sanitization)"},{"ancestorTitles":["Bill Service Unit Tests","generateBillsForMonth"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests generateBillsForMonth Should return count 0 if no occupied rooms found","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927462,"status":"passed","title":"Should return count 0 if no occupied rooms found"},{"ancestorTitles":["Bill Service Unit Tests","generateBillsForMonth"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests generateBillsForMonth Should skip generating bill if bill already exists","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927468,"status":"passed","title":"Should skip generating bill if bill already exists"},{"ancestorTitles":["Bill Service Unit Tests","generateMoveInBill"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests generateMoveInBill Should NOT generate bill if one already exists in current month","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927472,"status":"passed","title":"Should NOT generate bill if one already exists in current month"},{"ancestorTitles":["Bill Service Unit Tests","generateMoveInBill"],"duration":64,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests generateMoveInBill Should generate prorated bill if no bill exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927477,"status":"passed","title":"Should generate prorated bill if no bill exists"}],"endTime":1770110927542,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\billService.test.js","startTime":1770110926904,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Database Connection (db.js) Unit Tests"],"duration":35,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Database Connection (db.js) Unit Tests Should initialize Pool with correct environment variables","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927502,"status":"passed","title":"Should initialize Pool with correct environment variables"},{"ancestorTitles":["Database Connection (db.js) Unit Tests"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Database Connection (db.js) Unit Tests Should delegate query execution to the pool","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927538,"status":"passed","title":"Should delegate query execution to the pool"},{"ancestorTitles":["Database Connection (db.js) Unit Tests"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Database Connection (db.js) Unit Tests Should export getPool function that returns the pool instance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927543,"status":"passed","title":"Should export getPool function that returns the pool instance"}],"endTime":1770110927555,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\db.test.js","startTime":1770110927395,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Mailer Service Unit Tests","sendVerificationEmail"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendVerificationEmail Should send email with correct verification link","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1770110927497,"status":"passed","title":"Should send email with correct verification link"},{"ancestorTitles":["Mailer Service Unit Tests","sendVerificationEmail"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendVerificationEmail Should throw error when sending fails","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927509,"status":"passed","title":"Should throw error when sending fails"},{"ancestorTitles":["Mailer Service Unit Tests","sendPasswordResetEmail"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendPasswordResetEmail Should send email with correct reset link","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1770110927522,"status":"passed","title":"Should send email with correct reset link"},{"ancestorTitles":["Mailer Service Unit Tests","sendPasswordResetEmail"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendPasswordResetEmail Should throw error when sending fails","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927524,"status":"passed","title":"Should throw error when sending fails"},{"ancestorTitles":["Mailer Service Unit Tests","sendNewBillEmail"],"duration":49,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendNewBillEmail Should send email with correct bill details","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1770110927527,"status":"passed","title":"Should send email with correct bill details"},{"ancestorTitles":["Mailer Service Unit Tests","sendNewBillEmail"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendNewBillEmail Should throw error when sending fails","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927576,"status":"passed","title":"Should throw error when sending fails"}],"endTime":1770110927583,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\mailer.test.js","startTime":1770110927384,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Validation Utils Unit Tests","isValidEmail"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidEmail Should return true for valid emails","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927539,"status":"passed","title":"Should return true for valid emails"},{"ancestorTitles":["Validation Utils Unit Tests","isValidEmail"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidEmail Should return false for invalid emails","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1770110927545,"status":"passed","title":"Should return false for invalid emails"},{"ancestorTitles":["Validation Utils Unit Tests","isValidEmail"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidEmail Should handle empty or null inputs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927547,"status":"passed","title":"Should handle empty or null inputs"},{"ancestorTitles":["Validation Utils Unit Tests","isStrongPassword"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isStrongPassword Should return true for passwords with 6 or more characters","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927548,"status":"passed","title":"Should return true for passwords with 6 or more characters"},{"ancestorTitles":["Validation Utils Unit Tests","isStrongPassword"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isStrongPassword Should return false for passwords shorter than 6 characters","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927550,"status":"passed","title":"Should return false for passwords shorter than 6 characters"},{"ancestorTitles":["Validation Utils Unit Tests","isStrongPassword"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isStrongPassword Should handle empty or null inputs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927550,"status":"passed","title":"Should handle empty or null inputs"},{"ancestorTitles":["Validation Utils Unit Tests","isValidPhoneNumber"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidPhoneNumber Should return true for valid VN phone numbers","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927551,"status":"passed","title":"Should return true for valid VN phone numbers"},{"ancestorTitles":["Validation Utils Unit Tests","isValidPhoneNumber"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidPhoneNumber Should return false if phone number does not start with 0","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927552,"status":"passed","title":"Should return false if phone number does not start with 0"},{"ancestorTitles":["Validation Utils Unit Tests","isValidPhoneNumber"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidPhoneNumber Should return false if length is not exactly 10 digits","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927553,"status":"passed","title":"Should return false if length is not exactly 10 digits"},{"ancestorTitles":["Validation Utils Unit Tests","isValidPhoneNumber"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidPhoneNumber Should return false if contains non-numeric characters","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927555,"status":"passed","title":"Should return false if contains non-numeric characters"},{"ancestorTitles":["Validation Utils Unit Tests","isValidPhoneNumber"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidPhoneNumber Should handle empty or null inputs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927555,"status":"passed","title":"Should handle empty or null inputs"}],"endTime":1770110927557,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\validationUtils.test.js","startTime":1770110927407,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Admin Routes Unit Tests","GET /api/admin/users"],"duration":221,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests GET /api/admin/users Should return list of users","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925537,"status":"passed","title":"Should return list of users"},{"ancestorTitles":["Admin Routes Unit Tests","DELETE /api/admin/users/:id"],"duration":107,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests DELETE /api/admin/users/:id Should fail if user has unpaid bills","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110925759,"status":"passed","title":"Should fail if user has unpaid bills"},{"ancestorTitles":["Admin Routes Unit Tests","DELETE /api/admin/users/:id"],"duration":281,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests DELETE /api/admin/users/:id Should delete successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925866,"status":"passed","title":"Should delete successfully"},{"ancestorTitles":["Admin Routes Unit Tests","POST /api/admin/assign-room"],"duration":398,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests POST /api/admin/assign-room Should assign room successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110926148,"status":"passed","title":"Should assign room successfully"},{"ancestorTitles":["Admin Routes Unit Tests","POST /api/admin/assign-room"],"duration":316,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests POST /api/admin/assign-room Should fail if room not found or occupied","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110926547,"status":"passed","title":"Should fail if room not found or occupied"},{"ancestorTitles":["Admin Routes Unit Tests","POST /api/admin/unassign-room"],"duration":177,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests POST /api/admin/unassign-room Should unassign room successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110926863,"status":"passed","title":"Should unassign room successfully"},{"ancestorTitles":["Admin Routes Unit Tests","POST /api/admin/unassign-room"],"duration":178,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests POST /api/admin/unassign-room Should fail if resident has no room","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927041,"status":"passed","title":"Should fail if resident has no room"},{"ancestorTitles":["Admin Routes Unit Tests","POST /api/admin/news"],"duration":145,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests POST /api/admin/news Should create news","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927224,"status":"passed","title":"Should create news"},{"ancestorTitles":["Admin Routes Unit Tests","PATCH /api/admin/users/:id/status"],"duration":162,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests PATCH /api/admin/users/:id/status Should update user status successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927370,"status":"passed","title":"Should update user status successfully"},{"ancestorTitles":["Admin Routes Unit Tests","PATCH /api/admin/users/:id/status"],"duration":127,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests PATCH /api/admin/users/:id/status Should return 400 if isActive is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927532,"status":"passed","title":"Should return 400 if isActive is missing"},{"ancestorTitles":["Admin Routes Unit Tests","PUT /api/admin/users/:id"],"duration":62,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests PUT /api/admin/users/:id Should update user details successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927660,"status":"passed","title":"Should update user details successfully"},{"ancestorTitles":["Admin Routes Unit Tests","PUT /api/admin/users/:id"],"duration":61,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests PUT /api/admin/users/:id Should fail to promote to resident if not verified","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927722,"status":"passed","title":"Should fail to promote to resident if not verified"},{"ancestorTitles":["Admin Routes Unit Tests","GET /api/admin/residents"],"duration":53,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests GET /api/admin/residents Should return list of residents","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110927784,"status":"passed","title":"Should return list of residents"},{"ancestorTitles":["Admin Routes Unit Tests","GET /api/admin/blocks"],"duration":55,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests GET /api/admin/blocks Should return list of blocks","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770110927837,"status":"passed","title":"Should return list of blocks"},{"ancestorTitles":["Admin Routes Unit Tests","GET /api/admin/blocks/:blockId/rooms"],"duration":45,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests GET /api/admin/blocks/:blockId/rooms Should return rooms with details","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927892,"status":"passed","title":"Should return rooms with details"}],"endTime":1770110927939,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\admin.test.js","startTime":1770110923620,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Bill User Routes Unit Tests","GET /api/bills/my-bills-detailed"],"duration":155,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests GET /api/bills/my-bills-detailed Should return bills with line items correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110924896,"status":"passed","title":"Should return bills with line items correctly"},{"ancestorTitles":["Bill User Routes Unit Tests","GET /api/bills/my-bills-detailed"],"duration":124,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests GET /api/bills/my-bills-detailed Should return empty list if no bills found","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925052,"status":"passed","title":"Should return empty list if no bills found"},{"ancestorTitles":["Bill User Routes Unit Tests","GET /api/bills/my-transactions"],"duration":158,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests GET /api/bills/my-transactions Should return transaction history","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770110925176,"status":"passed","title":"Should return transaction history"},{"ancestorTitles":["Bill User Routes Unit Tests","POST /api/bills/create-payment"],"duration":2170,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests POST /api/bills/create-payment Should process payment SUCCESSFULLY","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1770110925334,"status":"passed","title":"Should process payment SUCCESSFULLY"},{"ancestorTitles":["Bill User Routes Unit Tests","POST /api/bills/create-payment"],"duration":2147,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests POST /api/bills/create-payment Should process payment FAILURE (Simulated)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110927504,"status":"passed","title":"Should process payment FAILURE (Simulated)"},{"ancestorTitles":["Bill User Routes Unit Tests","POST /api/bills/create-payment"],"duration":65,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests POST /api/bills/create-payment Should fail if bill invalid or already paid","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770110929652,"status":"passed","title":"Should fail if bill invalid or already paid"}],"endTime":1770110929718,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\billUser.test.js","startTime":1770110923575,"status":"passed","summary":""}],"wasInterrupted":false}
