{"numFailedTestSuites":1,"numFailedTests":2,"numPassedTestSuites":15,"numPassedTests":112,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":16,"numTotalTests":114,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1770109545139,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Vehicle Admin Routes Unit Tests","POST /api/admin/vehicle-requests/:id/approve"],"duration":491,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests POST /api/admin/vehicle-requests/:id/approve Should approve REGISTER request successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109548789,"status":"passed","title":"Should approve REGISTER request successfully"},{"ancestorTitles":["Vehicle Admin Routes Unit Tests","POST /api/admin/vehicle-requests/:id/approve"],"duration":101,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests POST /api/admin/vehicle-requests/:id/approve Should fail (400) if QUOTA EXCEEDED","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109549281,"status":"passed","title":"Should fail (400) if QUOTA EXCEEDED"},{"ancestorTitles":["Vehicle Admin Routes Unit Tests","POST /api/admin/vehicle-requests/:id/reject"],"duration":157,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests POST /api/admin/vehicle-requests/:id/reject Should reject request successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549382,"status":"passed","title":"Should reject request successfully"},{"ancestorTitles":["Vehicle Admin Routes Unit Tests","POST /api/admin/vehicle-requests/:id/reject"],"duration":138,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests POST /api/admin/vehicle-requests/:id/reject Should fail if missing reason","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549540,"status":"passed","title":"Should fail if missing reason"},{"ancestorTitles":["Vehicle Admin Routes Unit Tests","PATCH /api/admin/vehicle-cards/:id/status"],"duration":167,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests PATCH /api/admin/vehicle-cards/:id/status Should activate card successfully if quota valid","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549679,"status":"passed","title":"Should activate card successfully if quota valid"},{"ancestorTitles":["Vehicle Admin Routes Unit Tests","PATCH /api/admin/vehicle-cards/:id/status"],"duration":112,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Admin Routes Unit Tests PATCH /api/admin/vehicle-cards/:id/status Should fail to activate if quota exceeded","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549846,"status":"passed","title":"Should fail to activate if quota exceeded"}],"endTime":1770109549960,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\vehicleAdmin.test.js","startTime":1770109545994,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Amenity Admin Routes Unit Tests","GET /api/admin/amenities/rooms"],"duration":449,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests GET /api/admin/amenities/rooms Should return all rooms","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109548785,"status":"passed","title":"Should return all rooms"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","GET /api/admin/amenities/rooms"],"duration":121,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests GET /api/admin/amenities/rooms Should handle error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109549235,"status":"passed","title":"Should handle error"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","PUT /api/admin/amenities/rooms/:id"],"duration":134,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests PUT /api/admin/amenities/rooms/:id Should update room successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109549357,"status":"passed","title":"Should update room successfully"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","GET /api/admin/amenities/bookings"],"duration":122,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests GET /api/admin/amenities/bookings Should return all bookings","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549491,"status":"passed","title":"Should return all bookings"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","POST /api/admin/amenities/bookings/:id/cancel"],"duration":180,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests POST /api/admin/amenities/bookings/:id/cancel Should cancel booking and notify user","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109549614,"status":"passed","title":"Should cancel booking and notify user"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","POST /api/admin/amenities/bookings/:id/cancel"],"duration":136,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests POST /api/admin/amenities/bookings/:id/cancel Should fail (400) if reason is missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549795,"status":"passed","title":"Should fail (400) if reason is missing"},{"ancestorTitles":["Amenity Admin Routes Unit Tests","POST /api/admin/amenities/bookings/:id/cancel"],"duration":214,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity Admin Routes Unit Tests POST /api/admin/amenities/bookings/:id/cancel Should fail (404) if booking not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109549932,"status":"passed","title":"Should fail (404) if booking not found"}],"endTime":1770109550150,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\amenityAdmin.test.js","startTime":1770109545980,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Vehicle Services Unit Tests","GET /api/services/fees-table"],"duration":560,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests GET /api/services/fees-table Should return fees object","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109548784,"status":"passed","title":"Should return fees object"},{"ancestorTitles":["Vehicle Services Unit Tests","GET /api/services/my-policy"],"duration":114,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests GET /api/services/my-policy Should return room policy","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109549346,"status":"passed","title":"Should return room policy"},{"ancestorTitles":["Vehicle Services Unit Tests","POST /api/services/register-card"],"duration":128,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests POST /api/services/register-card Should register successfully if quota available","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549461,"status":"passed","title":"Should register successfully if quota available"},{"ancestorTitles":["Vehicle Services Unit Tests","POST /api/services/register-card"],"duration":179,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests POST /api/services/register-card Should fail (403) if limit reached","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109549589,"status":"passed","title":"Should fail (403) if limit reached"},{"ancestorTitles":["Vehicle Services Unit Tests","POST /api/services/cancel-card"],"duration":173,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests POST /api/services/cancel-card Should submit cancellation request","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549768,"status":"passed","title":"Should submit cancellation request"},{"ancestorTitles":["Vehicle Services Unit Tests","POST /api/services/cancel-card"],"duration":219,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests POST /api/services/cancel-card Should fail (400) if request already pending","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109549941,"status":"passed","title":"Should fail (400) if request already pending"},{"ancestorTitles":["Vehicle Services Unit Tests","POST /api/services/cancel-pending-request"],"duration":146,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vehicle Services Unit Tests POST /api/services/cancel-pending-request Should cancel pending request and delete file","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109550160,"status":"passed","title":"Should cancel pending request and delete file"}],"endTime":1770109550309,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\vehicle.test.js","startTime":1770109546001,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Admin Routes Unit Tests","GET /api/admin/users"],"duration":470,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests GET /api/admin/users Should return list of users","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109548874,"status":"passed","title":"Should return list of users"},{"ancestorTitles":["Admin Routes Unit Tests","DELETE /api/admin/users/:id"],"duration":122,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests DELETE /api/admin/users/:id Should fail if user has unpaid bills","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109549346,"status":"passed","title":"Should fail if user has unpaid bills"},{"ancestorTitles":["Admin Routes Unit Tests","DELETE /api/admin/users/:id"],"duration":109,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests DELETE /api/admin/users/:id Should delete successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549468,"status":"passed","title":"Should delete successfully"},{"ancestorTitles":["Admin Routes Unit Tests","POST /api/admin/assign-room"],"duration":189,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests POST /api/admin/assign-room Should assign room successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549577,"status":"passed","title":"Should assign room successfully"},{"ancestorTitles":["Admin Routes Unit Tests","POST /api/admin/assign-room"],"duration":135,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests POST /api/admin/assign-room Should fail if room not found or occupied","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549767,"status":"passed","title":"Should fail if room not found or occupied"},{"ancestorTitles":["Admin Routes Unit Tests","POST /api/admin/unassign-room"],"duration":153,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests POST /api/admin/unassign-room Should unassign room successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549903,"status":"passed","title":"Should unassign room successfully"},{"ancestorTitles":["Admin Routes Unit Tests","POST /api/admin/unassign-room"],"duration":215,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests POST /api/admin/unassign-room Should fail if resident has no room","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109550057,"status":"passed","title":"Should fail if resident has no room"},{"ancestorTitles":["Admin Routes Unit Tests","POST /api/admin/news"],"duration":175,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes Unit Tests POST /api/admin/news Should create news","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109550298,"status":"passed","title":"Should create news"}],"endTime":1770109550476,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\admin.test.js","startTime":1770109546023,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Profile Routes Unit Tests","GET /api/profile/me"],"duration":414,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests GET /api/profile/me Should return user profile with room details","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109548821,"status":"passed","title":"Should return user profile with room details"},{"ancestorTitles":["Profile Routes Unit Tests","GET /api/profile/me"],"duration":107,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests GET /api/profile/me Should return 404 if user not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109549243,"status":"passed","title":"Should return 404 if user not found"},{"ancestorTitles":["Profile Routes Unit Tests","GET /api/profile/status"],"duration":112,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests GET /api/profile/status Should return status info","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549350,"status":"passed","title":"Should return status info"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/update-details"],"duration":176,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/update-details Should update phone successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549462,"status":"passed","title":"Should update phone successfully"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/update-details"],"duration":138,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/update-details Should fail (400) if phone is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109549638,"status":"passed","title":"Should fail (400) if phone is missing"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/change-password"],"duration":154,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/change-password Should change password successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109549776,"status":"passed","title":"Should change password successfully"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/change-password"],"duration":157,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/change-password Should fail (400) if current password incorrect","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109549931,"status":"passed","title":"Should fail (400) if current password incorrect"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/change-password"],"duration":163,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/change-password Should fail (400) if new passwords do not match","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109550089,"status":"passed","title":"Should fail (400) if new passwords do not match"},{"ancestorTitles":["Profile Routes Unit Tests","PUT /api/profile/change-password"],"duration":183,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Profile Routes Unit Tests PUT /api/profile/change-password Should fail (400) if new password too short","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109550252,"status":"passed","title":"Should fail (400) if new password too short"}],"endTime":1770109550492,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\profile.test.js","startTime":1770109545981,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Amenity User Routes Unit Tests","GET /api/amenities/rooms"],"duration":407,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests GET /api/amenities/rooms Should return active rooms","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109548874,"status":"passed","title":"Should return active rooms"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/book"],"duration":329,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/book Should book successfully if all checks pass","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549282,"status":"passed","title":"Should book successfully if all checks pass"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/book"],"duration":146,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/book Should fail (403) if user has no apartment","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549611,"status":"passed","title":"Should fail (403) if user has no apartment"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/book"],"duration":131,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/book Should fail (400) if booking date is in past","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549758,"status":"passed","title":"Should fail (400) if booking date is in past"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/book"],"duration":128,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/book Should fail (400) if time slot occupied (Overlap)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549890,"status":"passed","title":"Should fail (400) if time slot occupied (Overlap)"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/cancel/:id"],"duration":204,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at Object.toBe (G:\\quanlychungcu\\backend\\tests\\amenityUser.test.js:204:36)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/cancel/:id Should cancel successfully if booking is in future","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1770109550019,"status":"failed","title":"Should cancel successfully if booking is in future"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/cancel/:id"],"duration":157,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":400,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m400\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at Object.toBe (G:\\quanlychungcu\\backend\\tests\\amenityUser.test.js:223:36)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/cancel/:id Should fail (400) if cancelling past booking","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1770109550257,"status":"failed","title":"Should fail (400) if cancelling past booking"},{"ancestorTitles":["Amenity User Routes Unit Tests","POST /api/amenities/cancel/:id"],"duration":170,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Amenity User Routes Unit Tests POST /api/amenities/cancel/:id Should fail (404) if booking not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109550415,"status":"passed","title":"Should fail (404) if booking not found"}],"endTime":1770109550675,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAmenity User Routes Unit Tests › POST /api/amenities/cancel/:id › Should cancel successfully if booking is in future\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 202 |\u001b[39m             \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39mpost(\u001b[32m'/api/amenities/cancel/1'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 203 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 204 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 205 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'cancelled successfully'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 206 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 207 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/amenityUser.test.js\u001b[39m\u001b[0m\u001b[2m:204:36)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAmenity User Routes Unit Tests › POST /api/amenities/cancel/:id › Should fail (400) if cancelling past booking\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m400\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 221 |\u001b[39m             \u001b[36mconst\u001b[39m res \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39mpost(\u001b[32m'/api/amenities/cancel/1'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 222 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 223 |\u001b[39m             expect(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 224 |\u001b[39m             expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Cannot cancel past bookings'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 225 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 226 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/amenityUser.test.js\u001b[39m\u001b[0m\u001b[2m:223:36)\u001b[22m\u001b[2m\u001b[22m\n","name":"G:\\quanlychungcu\\backend\\tests\\amenityUser.test.js","startTime":1770109545947,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/register"],"duration":99,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/register Should register successfully with valid data","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109550505,"status":"passed","title":"Should register successfully with valid data"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/register"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/register Should fail if email already exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109550605,"status":"passed","title":"Should fail if email already exists"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/register"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/register Should fail if password is weak","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109550616,"status":"passed","title":"Should fail if password is weak"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/register"],"duration":28,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/register Should fail if missing fields","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109550627,"status":"passed","title":"Should fail if missing fields"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/login"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/login Should login successfully with correct credentials","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109550656,"status":"passed","title":"Should login successfully with correct credentials"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/login"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/login Should fail if account is disabled","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109550669,"status":"passed","title":"Should fail if account is disabled"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/login"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/login Should fail if password is incorrect","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109550678,"status":"passed","title":"Should fail if password is incorrect"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/admin/login"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/admin/login Should login successfully if role is admin","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109550692,"status":"passed","title":"Should login successfully if role is admin"},{"ancestorTitles":["Auth Routes Unit Tests","POST /api/auth/admin/login"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests POST /api/auth/admin/login Should deny access if role is NOT admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109550701,"status":"passed","title":"Should deny access if role is NOT admin"},{"ancestorTitles":["Auth Routes Unit Tests","GET /api/auth/verify-email/:token"],"duration":21,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes Unit Tests GET /api/auth/verify-email/:token Should verify successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109550712,"status":"passed","title":"Should verify successfully"}],"endTime":1770109550735,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\auth.test.js","startTime":1770109549980,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["News Routes Unit Tests","GET /api/news"],"duration":19,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests GET /api/news Should return list of active news","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109550698,"status":"passed","title":"Should return list of active news"},{"ancestorTitles":["News Routes Unit Tests","GET /api/news"],"duration":59,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests GET /api/news Should handle server error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109550717,"status":"passed","title":"Should handle server error"},{"ancestorTitles":["News Routes Unit Tests","GET /api/news/:id"],"duration":45,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests GET /api/news/:id Should return news details if found","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109550778,"status":"passed","title":"Should return news details if found"},{"ancestorTitles":["News Routes Unit Tests","GET /api/news/:id"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests GET /api/news/:id Should return 404 if not found","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109550823,"status":"passed","title":"Should return 404 if not found"},{"ancestorTitles":["News Routes Unit Tests","POST /api/news/upload-image"],"duration":26,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests POST /api/news/upload-image Should upload image successfully (Mocked)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109550837,"status":"passed","title":"Should upload image successfully (Mocked)"},{"ancestorTitles":["News Routes Unit Tests","POST /api/news/upload-image"],"duration":39,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"News Routes Unit Tests POST /api/news/upload-image Should return 400 if no file uploaded","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109550863,"status":"passed","title":"Should return 400 if no file uploaded"}],"endTime":1770109550904,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\news.test.js","startTime":1770109550224,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Dashboard Routes Unit Tests","GET /api/dashboard/stats"],"duration":22,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Dashboard Routes Unit Tests GET /api/dashboard/stats Should return all statistics correctly","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1770109550971,"status":"passed","title":"Should return all statistics correctly"},{"ancestorTitles":["Dashboard Routes Unit Tests","GET /api/dashboard/stats"],"duration":95,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Dashboard Routes Unit Tests GET /api/dashboard/stats Should handle database errors gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109550993,"status":"passed","title":"Should handle database errors gracefully"}],"endTime":1770109551089,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\dashboard.test.js","startTime":1770109550433,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Mailer Service Unit Tests","sendVerificationEmail"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendVerificationEmail Should send email with correct verification link","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1770109551049,"status":"passed","title":"Should send email with correct verification link"},{"ancestorTitles":["Mailer Service Unit Tests","sendVerificationEmail"],"duration":24,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendVerificationEmail Should throw error when sending fails","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109551058,"status":"passed","title":"Should throw error when sending fails"},{"ancestorTitles":["Mailer Service Unit Tests","sendPasswordResetEmail"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendPasswordResetEmail Should send email with correct reset link","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1770109551082,"status":"passed","title":"Should send email with correct reset link"},{"ancestorTitles":["Mailer Service Unit Tests","sendPasswordResetEmail"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendPasswordResetEmail Should throw error when sending fails","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109551088,"status":"passed","title":"Should throw error when sending fails"},{"ancestorTitles":["Mailer Service Unit Tests","sendNewBillEmail"],"duration":132,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendNewBillEmail Should send email with correct bill details","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1770109551107,"status":"passed","title":"Should send email with correct bill details"},{"ancestorTitles":["Mailer Service Unit Tests","sendNewBillEmail"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Mailer Service Unit Tests sendNewBillEmail Should throw error when sending fails","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109551240,"status":"passed","title":"Should throw error when sending fails"}],"endTime":1770109551244,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\mailer.test.js","startTime":1770109550793,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Penalty Service Unit Tests","calculateLateFee"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests calculateLateFee Should return 0 fee if daysLate <= 3 (Grace period)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551271,"status":"passed","title":"Should return 0 fee if daysLate <= 3 (Grace period)"},{"ancestorTitles":["Penalty Service Unit Tests","calculateLateFee"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests calculateLateFee Should return 5% fee if daysLate is between 4 and 30","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551274,"status":"passed","title":"Should return 5% fee if daysLate is between 4 and 30"},{"ancestorTitles":["Penalty Service Unit Tests","calculateLateFee"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests calculateLateFee Should return 10% fee if daysLate > 30","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551275,"status":"passed","title":"Should return 10% fee if daysLate > 30"},{"ancestorTitles":["Penalty Service Unit Tests","calculateLateFee"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests calculateLateFee Should handle negative inputs (Sanitization)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551276,"status":"passed","title":"Should handle negative inputs (Sanitization)"},{"ancestorTitles":["Penalty Service Unit Tests","applyLateFees"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests applyLateFees STAGE 1: Should apply penalty fee and update status to overdue","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551283,"status":"passed","title":"STAGE 1: Should apply penalty fee and update status to overdue"},{"ancestorTitles":["Penalty Service Unit Tests","applyLateFees"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests applyLateFees STAGE 2: Should apply second penalty fee","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551297,"status":"passed","title":"STAGE 2: Should apply second penalty fee"},{"ancestorTitles":["Penalty Service Unit Tests","applyLateFees"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests applyLateFees STAGE 3: Should LOCK USER ACCOUNT and notify Admin","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1770109551301,"status":"passed","title":"STAGE 3: Should LOCK USER ACCOUNT and notify Admin"},{"ancestorTitles":["Penalty Service Unit Tests","applyLateFees"],"duration":25,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests applyLateFees Should ROLLBACK transaction if an error occurs","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551307,"status":"passed","title":"Should ROLLBACK transaction if an error occurs"},{"ancestorTitles":["Penalty Service Unit Tests","notifyAdminOverdueBills"],"duration":17,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Penalty Service Unit Tests notifyAdminOverdueBills Should run without error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109551333,"status":"passed","title":"Should run without error"}],"endTime":1770109551353,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\penaltyService.test.js","startTime":1770109550760,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should return 401 if no token provided","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551497,"status":"passed","title":"Should return 401 if no token provided"},{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should return 401 if token is invalid (jwt verify fails)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551500,"status":"passed","title":"Should return 401 if token is invalid (jwt verify fails)"},{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should return 401 if user not found in DB","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551519,"status":"passed","title":"Should return 401 if user not found in DB"},{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should return 403 if user account is disabled (is_active = false)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551526,"status":"passed","title":"Should return 403 if user account is disabled (is_active = false)"},{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should return 401 if role has changed (Token role !== DB role)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551531,"status":"passed","title":"Should return 401 if role has changed (Token role !== DB role)"},{"ancestorTitles":["Auth Middleware Unit Tests","protect"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests protect Should call next() and set req.user if everything is valid","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551533,"status":"passed","title":"Should call next() and set req.user if everything is valid"},{"ancestorTitles":["Auth Middleware Unit Tests","isAdmin"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests isAdmin Should call next() if user is admin","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551537,"status":"passed","title":"Should call next() if user is admin"},{"ancestorTitles":["Auth Middleware Unit Tests","isAdmin"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests isAdmin Should return 403 if user is NOT admin","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551538,"status":"passed","title":"Should return 403 if user is NOT admin"},{"ancestorTitles":["Auth Middleware Unit Tests","isAdmin"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Middleware Unit Tests isAdmin Should return 403 if req.user is missing (Not logged in logic leak check)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551540,"status":"passed","title":"Should return 403 if req.user is missing (Not logged in logic leak check)"}],"endTime":1770109551543,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\authMiddleware.test.js","startTime":1770109550517,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Validation Utils Unit Tests","isValidEmail"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidEmail Should return true for valid emails","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551418,"status":"passed","title":"Should return true for valid emails"},{"ancestorTitles":["Validation Utils Unit Tests","isValidEmail"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidEmail Should return false for invalid emails","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1770109551420,"status":"passed","title":"Should return false for invalid emails"},{"ancestorTitles":["Validation Utils Unit Tests","isValidEmail"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidEmail Should handle empty or null inputs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551421,"status":"passed","title":"Should handle empty or null inputs"},{"ancestorTitles":["Validation Utils Unit Tests","isStrongPassword"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isStrongPassword Should return true for passwords with 6 or more characters","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551422,"status":"passed","title":"Should return true for passwords with 6 or more characters"},{"ancestorTitles":["Validation Utils Unit Tests","isStrongPassword"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isStrongPassword Should return false for passwords shorter than 6 characters","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551423,"status":"passed","title":"Should return false for passwords shorter than 6 characters"},{"ancestorTitles":["Validation Utils Unit Tests","isStrongPassword"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isStrongPassword Should handle empty or null inputs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551424,"status":"passed","title":"Should handle empty or null inputs"},{"ancestorTitles":["Validation Utils Unit Tests","isValidPhoneNumber"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidPhoneNumber Should return true for valid VN phone numbers","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551425,"status":"passed","title":"Should return true for valid VN phone numbers"},{"ancestorTitles":["Validation Utils Unit Tests","isValidPhoneNumber"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidPhoneNumber Should return false if phone number does not start with 0","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551426,"status":"passed","title":"Should return false if phone number does not start with 0"},{"ancestorTitles":["Validation Utils Unit Tests","isValidPhoneNumber"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidPhoneNumber Should return false if length is not exactly 10 digits","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551426,"status":"passed","title":"Should return false if length is not exactly 10 digits"},{"ancestorTitles":["Validation Utils Unit Tests","isValidPhoneNumber"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidPhoneNumber Should return false if contains non-numeric characters","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551428,"status":"passed","title":"Should return false if contains non-numeric characters"},{"ancestorTitles":["Validation Utils Unit Tests","isValidPhoneNumber"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Utils Unit Tests isValidPhoneNumber Should handle empty or null inputs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551428,"status":"passed","title":"Should handle empty or null inputs"}],"endTime":1770109551431,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\validationUtils.test.js","startTime":1770109551204,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Database Connection (db.js) Unit Tests"],"duration":46,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Database Connection (db.js) Unit Tests Should initialize Pool with correct environment variables","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551502,"status":"passed","title":"Should initialize Pool with correct environment variables"},{"ancestorTitles":["Database Connection (db.js) Unit Tests"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Database Connection (db.js) Unit Tests Should delegate query execution to the pool","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551549,"status":"passed","title":"Should delegate query execution to the pool"},{"ancestorTitles":["Database Connection (db.js) Unit Tests"],"duration":19,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Database Connection (db.js) Unit Tests Should export getPool function that returns the pool instance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551557,"status":"passed","title":"Should export getPool function that returns the pool instance"}],"endTime":1770109551581,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\db.test.js","startTime":1770109551358,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Bill Service Unit Tests","calculateMonthlyBill"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests calculateMonthlyBill Should calculate total correctly with all fees provided","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1770109551512,"status":"passed","title":"Should calculate total correctly with all fees provided"},{"ancestorTitles":["Bill Service Unit Tests","calculateMonthlyBill"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests calculateMonthlyBill Should handle null/undefined inputs gracefully (robustness)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1770109551516,"status":"passed","title":"Should handle null/undefined inputs gracefully (robustness)"},{"ancestorTitles":["Bill Service Unit Tests","calculateMonthlyBill"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests calculateMonthlyBill Should handle negative numbers by treating them as 0 (sanitization)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109551518,"status":"passed","title":"Should handle negative numbers by treating them as 0 (sanitization)"},{"ancestorTitles":["Bill Service Unit Tests","generateBillsForMonth"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests generateBillsForMonth Should return count 0 if no occupied rooms found","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551519,"status":"passed","title":"Should return count 0 if no occupied rooms found"},{"ancestorTitles":["Bill Service Unit Tests","generateBillsForMonth"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests generateBillsForMonth Should skip generating bill if bill already exists","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109551525,"status":"passed","title":"Should skip generating bill if bill already exists"},{"ancestorTitles":["Bill Service Unit Tests","generateMoveInBill"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests generateMoveInBill Should NOT generate bill if one already exists in current month","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109551529,"status":"passed","title":"Should NOT generate bill if one already exists in current month"},{"ancestorTitles":["Bill Service Unit Tests","generateMoveInBill"],"duration":43,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill Service Unit Tests generateMoveInBill Should generate prorated bill if no bill exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1770109551548,"status":"passed","title":"Should generate prorated bill if no bill exists"}],"endTime":1770109551592,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\billService.test.js","startTime":1770109550508,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Bill User Routes Unit Tests","GET /api/bills/my-bills-detailed"],"duration":366,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests GET /api/bills/my-bills-detailed Should return bills with line items correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109548868,"status":"passed","title":"Should return bills with line items correctly"},{"ancestorTitles":["Bill User Routes Unit Tests","GET /api/bills/my-bills-detailed"],"duration":117,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests GET /api/bills/my-bills-detailed Should return empty list if no bills found","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549235,"status":"passed","title":"Should return empty list if no bills found"},{"ancestorTitles":["Bill User Routes Unit Tests","GET /api/bills/my-transactions"],"duration":115,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests GET /api/bills/my-transactions Should return transaction history","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1770109549352,"status":"passed","title":"Should return transaction history"},{"ancestorTitles":["Bill User Routes Unit Tests","POST /api/bills/create-payment"],"duration":2182,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests POST /api/bills/create-payment Should process payment SUCCESSFULLY","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1770109549467,"status":"passed","title":"Should process payment SUCCESSFULLY"},{"ancestorTitles":["Bill User Routes Unit Tests","POST /api/bills/create-payment"],"duration":2167,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests POST /api/bills/create-payment Should process payment FAILURE (Simulated)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109551649,"status":"passed","title":"Should process payment FAILURE (Simulated)"},{"ancestorTitles":["Bill User Routes Unit Tests","POST /api/bills/create-payment"],"duration":227,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Bill User Routes Unit Tests POST /api/bills/create-payment Should fail if bill invalid or already paid","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1770109553816,"status":"passed","title":"Should fail if bill invalid or already paid"}],"endTime":1770109554049,"message":"","name":"G:\\quanlychungcu\\backend\\tests\\billUser.test.js","startTime":1770109545947,"status":"passed","summary":""}],"wasInterrupted":false}
